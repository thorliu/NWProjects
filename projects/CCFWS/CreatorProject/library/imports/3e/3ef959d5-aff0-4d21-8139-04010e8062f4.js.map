{"version":3,"sources":["../../../../../../../assets/resources/scripts/fws/utils/assets/resources/scripts/fws/utils/HttpUtils.ts"],"names":[],"mappings":";;;;AAAA;;;;;;GAMG;AACH,IAAO,SAAS,CAmWf;AAnWD,WAAO,SAAS;IAGf;;OAEG;IACH,IAAM,QAAQ,GAAW,sEAAsE,CAAC;IAEhG;;;;;;;OAOG;IACH,kBAAyB,GAAW,EAAE,IAAY,EAAE,KAAU;QAE7D,IAAI,GAAG,GAAW,GAAG,GAAG,EAAE,CAAC;QAE3B,IAAI,CAAC,IAAI;YAAE,OAAO,GAAG,CAAC;QACtB,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS;YAAE,OAAO,GAAG,CAAC;QAEtD,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC;YAAE,GAAG,IAAI,GAAG,CAAC;QAE/B,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAChC,GAAG,IAAI,GAAG,CAAC;QACX,GAAG,IAAI,kBAAkB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAE5C,OAAO,GAAG,CAAC;IACZ,CAAC;IAde,kBAAQ,WAcvB,CAAA;IAED;;;;;OAKG;IACH,mBAA0B,IAAS;QAElC,IAAI,GAAG,GAAW,EAAE,CAAC;QAErB,IAAI,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,QAAQ,EACtC;YACC,KAAK,IAAI,GAAG,IAAI,IAAI,EACpB;gBACC,IAAI,KAAK,GAAQ,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC3B,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,CAAC;aAC3C;SACD;QAED,OAAO,GAAG,CAAC;IACZ,CAAC;IAde,mBAAS,YAcxB,CAAA;IAED;;;OAGG;IACH,eAAsB,GAAW;QAEhC,IAAI,GAAG,CAAC,WAAW,EAAE,KAAK,aAAa;YAAE,OAAO,IAAI,CAAC;;YAChD,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAJe,eAAK,QAIpB,CAAA;IAED;;;OAGG;IACH;QAkDC;;;;;WAKG;QACH,aAAY,GAAY,EAAE,OAAgB;YAEzC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QAC1B,CAAC;QAED;;;;;WAKG;QACI,SAAK,GAAZ,UAAa,GAAW;YAEvB,OAAO,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,CAAC;QAED;;;;;;WAMG;QACO,mBAAK,GAAf,UAAgB,GAAW,EAAE,OAAe;YAE3C,IAAI,CAAC,GAAG;gBAAE,OAAO;YACjB,IAAI,GAAG,GAAW,GAAG,CAAC;YACtB,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EACjC;gBACC,IAAI,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,EAC7E;oBACC,GAAG,GAAG,OAAO,GAAG,GAAG,CAAC;iBACpB;qBAED;oBACC,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,GAAG,CAAC;iBAC1B;aACD;YAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC;gBAAE,OAAO;YAEhC,IAAI,EAAE,GAAoB,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE7C,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAClC,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAC7B;gBACC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;aACvC;;gBACI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAElC,OAAO;YACP,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAC7B;gBACC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aAC9B;;gBACI,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YAEtB,QAAQ;YACR,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAC7B;gBACC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;aAC/B;;gBACI,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACxB,CAAC;QAED;;;;;WAKG;QACI,2BAAa,GAApB,UAAqB,IAAY,EAAE,KAAU;YAE5C,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAClD,CAAC;QAED;;;;;WAKG;QACI,4BAAc,GAArB,UAAsB,IAAY,EAAE,KAAU;YAE7C,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QACpD,CAAC;QAID;;;;WAIG;QACI,4BAAc,GAArB,UAAsB,IAAS;YAE9B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;QAED;;;;WAIG;QACI,6BAAe,GAAtB,UAAuB,IAAS;YAE/B,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;QAED;;;;WAIG;QACI,sBAAQ,GAAf;YAEC,IAAI,GAAG,GAAW,EAAE,CAAC;YAErB,GAAG,IAAI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YAC5B,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;YAClB,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAClB;gBACC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;aACnC;YACD,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC;YAClB,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EACzC;gBACC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;aACzB;YACD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAC3C;gBACC,GAAG,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;aAC1B;YAED,OAAO,GAAG,CAAC;QACZ,CAAC;QASD,sBAAW,uBAAM;YAPjB,IAAI;YAEJ;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,OAAO,CAAC;YACrB,CAAC;iBACD,UAAkB,CAAS;gBAE1B,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YAClB,CAAC;;;WAJA;QAWD,sBAAW,qBAAI;YALf;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,KAAK,CAAC;YACnB,CAAC;iBACD,UAAgB,CAAS;gBAExB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAChB,CAAC;;;WAJA;QAWD,sBAAW,qBAAI;YALf;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,KAAK,CAAC;YACnB,CAAC;iBACD,UAAgB,CAAS;gBAExB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAChB,CAAC;;;WAJA;QAWD,sBAAW,qBAAI;YALf;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,KAAK,CAAC;YACnB,CAAC;iBACD,UAAgB,CAAS;gBAExB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAChB,CAAC;;;WAJA;QAWD,sBAAW,sBAAK;YALhB;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,MAAM,CAAC;YACpB,CAAC;iBACD,UAAiB,CAAS;gBAEzB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACjB,CAAC;;;WAJA;QAWD,sBAAW,uBAAM;YALjB;;;;eAIG;iBACH;gBAEC,OAAO,IAAI,CAAC,OAAO,CAAC;YACrB,CAAC;iBACD,UAAkB,CAAS;gBAE1B,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YAClB,CAAC;;;WAJA;QAKF,UAAC;IAAD,CA9RA,AA8RC,IAAA;IA9RY,aAAG,MA8Rf,CAAA;AACF,CAAC,EAnWM,SAAS,KAAT,SAAS,QAmWf;AAED,iBAAS,SAAS,CAAC;AAEnB,UAAU;AACV,qGAAqG;AACrG,yEAAyE;AACzE,sCAAsC;AACtC,4CAA4C;AAC5C,4CAA4C;AAC5C,kBAAkB;AAClB,6BAA6B","file":"","sourceRoot":"../../../../../../../assets/resources/scripts/fws/utils","sourcesContent":["/*\n * Http 常用功能\n * @Author: 刘强 \n * @Date: 2018-07-16 17:47:09 \n * @Last Modified by: 刘强\n * @Last Modified time: 2018-07-16 17:47:29\n */\nmodule HttpUtils\n{\n\n\t/**\n\t * URL正则表达式\n\t */\n\tconst regexUrl: RegExp = /^(http|https):\\/\\/([^\\/\\:]+)(:\\d+)?([^\\?\\#]*)(\\?[^#]*)?(#[^\\r\\n]*)?$/;\n\n\t/**\n\t * 添加一个k/v参数字符串\n\t * @export\n\t * @param {string} src \n\t * @param {string} name \n\t * @param {*} value \n\t * @returns {string} \n\t */\n\texport function addParam(src: string, name: string, value: any): string\n\t{\n\t\tvar ret: string = src + \"\";\n\n\t\tif (!name) return ret;\n\t\tif (value === null || value === undefined) return ret;\n\n\t\tif (ret.length > 0) ret += \"&\";\n\n\t\tret += encodeURIComponent(name);\n\t\tret += \"=\";\n\t\tret += encodeURIComponent(value.toString());\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * 获取k/v参数集的字符串\n\t * @export\n\t * @param {*} data \n\t * @returns {string} \n\t */\n\texport function getParams(data: any): string\n\t{\n\t\tvar ret: string = \"\";\n\n\t\tif (data && typeof (data) === \"object\")\n\t\t{\n\t\t\tfor (var key in data)\n\t\t\t{\n\t\t\t\tvar value: any = data[key];\n\t\t\t\tret = addParam(ret, key.toString(), value);\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * 检查是否是合法的URL地址\n\t * @param uri \n\t */\n\texport function isUrl(uri: string): boolean\n\t{\n\t\tif (uri.toLowerCase() === \"about:blank\") return true;\n\t\telse return regexUrl.test(uri);\n\t}\n\n\t/**\n\t * URL地址处理类, 仅限http/https方案\n\t * @class URL\n\t */\n\texport class URL\n\t{\n\t\t/**\n\t\t * 方案\n\t\t * @protected\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _scheme: string;\n\n\t\t/**\n\t\t * 主机\n\t\t * @protected\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _host: string;\n\n\t\t/**\n\t\t * 端口\n\t\t * @protected\n\t\t * @type {number}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _port: number;\n\n\t\t/**\n\t\t * 路径\n\t\t * @protected\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _path: string;\n\n\t\t/**\n\t\t * 请求参数\n\t\t * @protected\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _query: string;\n\n\t\t/**\n\t\t * 锚点参数\n\t\t * @protected\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tprivate _anchor: string;\n\n\t\t/**\n\t\t * 构造\n\t\t * @param {string} uri 参考地址\n\t\t * @param {string} baseUrl 基础地址\n\t\t * @memberof URL\n\t\t */\n\t\tconstructor(uri?: string, baseUrl?: string)\n\t\t{\n\t\t\tthis._scheme = \"\";\n\t\t\tthis._host = \"\";\n\t\t\tthis._port = 0;\n\t\t\tthis._path = \"\";\n\t\t\tthis._query = \"\";\n\t\t\tthis._anchor = \"\";\n\t\t\tthis.parse(uri, baseUrl);\n\t\t}\n\n\t\t/**\n\t\t * 检查URL是否合法\n\t\t * @param {string} uri \n\t\t * @returns {boolean} \n\t\t * @memberof URL\n\t\t */\n\t\tstatic isUrl(uri: string): boolean\n\t\t{\n\t\t\treturn HttpUtils.isUrl(uri);\n\t\t}\n\n\t\t/**\n\t\t * 解析URL地址\n\t\t * @protected\n\t\t * @param {string} uri 参考地址\n\t\t * @param {string} baseUrl 基础地址\n\t\t * @memberof URL\n\t\t */\n\t\tprotected parse(uri: string, baseUrl: string): void\n\t\t{\n\t\t\tif (!uri) return;\n\t\t\tvar url: string = uri;\n\t\t\tif (baseUrl && baseUrl.length > 0)\n\t\t\t{\n\t\t\t\tif (baseUrl.substr(baseUrl.length - 1, 1) === \"/\" || uri.substr(0, 1) === \"/\")\n\t\t\t\t{\n\t\t\t\t\turl = baseUrl + uri;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\turl = baseUrl + \"/\" + uri;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!regexUrl.test(url)) return;\n\n\t\t\tvar ps: RegExpExecArray = regexUrl.exec(url);\n\n\t\t\tthis._scheme = (ps[1] ? ps[1] : \"\");\n\t\t\tthis._host = (ps[2] ? ps[2] : \"\");\n\t\t\tif (ps[3] && ps[3].length > 1)\n\t\t\t{\n\t\t\t\tthis._port = parseInt(ps[3].substr(1));\n\t\t\t}\n\t\t\telse this._port = 0;\n\t\t\tthis._path = (ps[4] ? ps[4] : \"\");\n\n\t\t\t//query\n\t\t\tif (ps[5] && ps[5].length > 1)\n\t\t\t{\n\t\t\t\tthis._query = ps[5].substr(1);\n\t\t\t}\n\t\t\telse this._query = \"\";\n\n\t\t\t//anchor\n\t\t\tif (ps[6] && ps[6].length > 1)\n\t\t\t{\n\t\t\t\tthis._anchor = ps[6].substr(1);\n\t\t\t}\n\t\t\telse this._anchor = \"\";\n\t\t}\n\n\t\t/**\n\t\t * 添加一个请求参数\n\t\t * @param {string} name \n\t\t * @param {*} value \n\t\t * @memberof URL\n\t\t */\n\t\tpublic addQueryParam(name: string, value: any): void\n\t\t{\n\t\t\tthis._query = addParam(this._query, name, value);\n\t\t}\n\n\t\t/**\n\t\t * 添加一个锚点参数\n\t\t * @param {string} name \n\t\t * @param {*} value \n\t\t * @memberof URL\n\t\t */\n\t\tpublic addAnchorParam(name: string, value: any): void\n\t\t{\n\t\t\tthis._anchor = addParam(this._anchor, name, value);\n\t\t}\n\n\n\n\t\t/**\n\t\t * 设置请求数据\n\t\t * @param {*} data \n\t\t * @memberof URL\n\t\t */\n\t\tpublic setQueryParams(data: any): void\n\t\t{\n\t\t\tthis._query = getParams(data);\n\t\t}\n\n\t\t/**\n\t\t * 设置锚点数据\n\t\t * @param {*} data \n\t\t * @memberof URL\n\t\t */\n\t\tpublic setAnchorParams(data: any): void\n\t\t{\n\t\t\tthis._anchor = getParams(data);\n\t\t}\n\n\t\t/**\n\t\t * 获取URL地址字符串\n\t\t * @returns {string} \n\t\t * @memberof URL\n\t\t */\n\t\tpublic toString(): string\n\t\t{\n\t\t\tvar ret: string = \"\";\n\n\t\t\tret += this._scheme + \"://\";\n\t\t\tret += this._host;\n\t\t\tif (this._port > 0)\n\t\t\t{\n\t\t\t\tret += \":\" + this._port.toString();\n\t\t\t}\n\t\t\tret += this._path;\n\t\t\tif (this._query && this._query.length > 0)\n\t\t\t{\n\t\t\t\tret += \"?\" + this._query;\n\t\t\t}\n\t\t\tif (this._anchor && this._anchor.length > 0)\n\t\t\t{\n\t\t\t\tret += \"#\" + this._anchor;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\t//属性\n\n\t\t/**\n\t\t * 获取或设置地址方案(HTTP/HTTPS)\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get scheme(): string\n\t\t{\n\t\t\treturn this._scheme;\n\t\t}\n\t\tpublic set scheme(v: string)\n\t\t{\n\t\t\tthis._scheme = v;\n\t\t}\n\n\t\t/**\n\t\t * 获取或设置主机地址(域名或者端口)\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get host(): string\n\t\t{\n\t\t\treturn this._host;\n\t\t}\n\t\tpublic set host(v: string)\n\t\t{\n\t\t\tthis._host = v;\n\t\t}\n\n\t\t/**\n\t\t * 获取或设置端口号\n\t\t * @type {number}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get port(): number\n\t\t{\n\t\t\treturn this._port;\n\t\t}\n\t\tpublic set port(v: number)\n\t\t{\n\t\t\tthis._port = v;\n\t\t}\n\n\t\t/**\n\t\t * 获取或设置路径\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get path(): string\n\t\t{\n\t\t\treturn this._path;\n\t\t}\n\t\tpublic set path(v: string)\n\t\t{\n\t\t\tthis._path = v;\n\t\t}\n\n\t\t/**\n\t\t * 获取或设置请求参数(GET)\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get query(): string\n\t\t{\n\t\t\treturn this._query;\n\t\t}\n\t\tpublic set query(v: string)\n\t\t{\n\t\t\tthis._query = v;\n\t\t}\n\n\t\t/**\n\t\t * 获取或设置锚点参数\n\t\t * @type {string}\n\t\t * @memberof URL\n\t\t */\n\t\tpublic get anchor(): string\n\t\t{\n\t\t\treturn this._anchor;\n\t\t}\n\t\tpublic set anchor(v: string)\n\t\t{\n\t\t\tthis._anchor = v;\n\t\t}\n\t}\n}\n\nexport = HttpUtils;\n\n// SAMPLE:\n// var u = new HttpUtils.URL(\"http://www.163.com:8080/abcde/ddd/p/1232345.html?a=1&b=2&c=3#abcdefg\");\n// var u = new HttpUtils.URL(\"/module/api\", \"http://poker.smzy.cc:8080\");\n// u.addQueryParam(\"token\",\"OOOOOOO\");\n// u.addQueryParam(\"userid\", \"10175000062\");\n// u.addAnchorParam(\"gameuuid\", \"XXXXXXXX\");\n// console.log(u);\n// console.log(u.toString());\n\n"]}